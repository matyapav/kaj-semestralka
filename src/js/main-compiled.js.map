{"version":3,"sources":["main.js"],"names":[],"mappings":"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","file":"main-compiled.js","sourcesContent":["/**\r\n * Created by Pavel on 01.04.2017.\r\n */\r\nimport Player from './drawables/player.js';\r\nimport Drawable from './drawables/drawable.js'\r\nimport InteractiveTile from './drawables/interactive_tile.js'\r\nimport Controls from './managers/controls.js'\r\nimport Item from './drawables/item.js'\r\nimport ItemManager from './managers/item_manager.js'\r\nimport LevelManager from './managers/level_manager.js'\r\nimport Dialog from './drawables/dialog.js'\r\nimport ResourceManager from './managers/resource_manager.js'\r\n\r\nconst canvas = document.getElementById(\"myCanvas\");\r\nconst ctx = canvas.getContext('2d');\r\nctx.scale(2, 2);\r\n\r\n//TODO vytvorit soubor LevelManager nebo tak neco\r\n\r\n\r\nLevelManager.initLevels();\r\nlet dialogs = [];\r\nlet player = new Player(canvas.width/2,canvas.height/2,18,24,2, ResourceManager.get(\"trainer\"));\r\n//TODO udelat soubor worldBuilder nebo neco takoveho\r\n//init world\r\nlet level = LevelManager.actualLevel;\r\nlet walls = [], items = [], grass = [];\r\nfor(let i=0;i<level.length;i++){\r\n    for(let j=0;j<level[i].length;j++){\r\n        switch (level[i][j]){\r\n            case 0:\r\n                grass.push(new Drawable(j*32, i*32, 32, 32, ResourceManager.get('grass')));\r\n                break;\r\n            case 1:\r\n                walls.push(new InteractiveTile(j*32, i*32, 32, 32, ResourceManager.get('wall')));\r\n                break;\r\n            case 2:\r\n            case 3:\r\n            case 4:\r\n                grass.push(new Drawable(j*32, i*32, 32, 32, ResourceManager.get('grass')));\r\n                items.push(new Item(j*32, i*32, 32, 32, ItemManager.getItem(level[i][j]), ResourceManager.get('pokeball')));\r\n                break;\r\n        }\r\n    }\r\n}\r\n//keyboard input\r\nlet controls = new Controls(player, dialogs);\r\ncontrols.init();\r\n\r\n\r\n//TODO vymyslet co s timto - presunout nepresunout?\r\nfunction checkCollisions() {\r\n    for(let i=0; i<walls.length; i++){\r\n        if(walls[i].checkCollisionWithPlayer(player)){\r\n            player.dx = 0;\r\n            player.dy = 0;\r\n            player.playerAnimation.stopAnimation();\r\n        }\r\n    }\r\n    for(let i=0; i<items.length; i++){\r\n        if(items[i].checkCollisionWithPlayer(player)){\r\n            if(player.isDoingPrimaryAction()) {\r\n                controls.switchToDialogControls();\r\n                let dialogX = player.posX - canvas.width/8 + player.w/2;\r\n                let dialogY = player.posY + canvas.height/2 - 200;\r\n                let dialogHeight = 50;\r\n                let dialogWidth = canvas.width/4;\r\n                dialogs.push(new Dialog(dialogX,dialogY, dialogWidth, dialogHeight, \"You've found \"+items[i].itemInfo.name));\r\n                dialogs.push(new Dialog(dialogX,dialogY, dialogWidth, dialogHeight,\r\n                    items[i].itemInfo.name+\" is \"+items[i].itemInfo.desc));\r\n                player.backpack.addToBackpack(items[i].itemInfo.name);\r\n                items.splice(i, 1); //remove from map\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n//game updates////////\r\nfunction update(){\r\n    checkCollisions();\r\n    player.update();\r\n    draw();\r\n}\r\n//draw\r\nfunction draw() {\r\n    clearCanvas();\r\n    ctx.save();\r\n    ctx.translate(-player.posX+ canvas.width/2/2 - player.w, -player.posY + canvas.height/2/2 - player.h);\r\n\r\n    for(let i=0; i<walls.length; i++){\r\n        walls[i].draw(ctx);\r\n    }\r\n    for(let i=0; i<grass.length; i++){\r\n        grass[i].draw(ctx);\r\n    }\r\n    for(let i=0; i<items.length; i++){\r\n        items[i].draw(ctx);\r\n    }\r\n\r\n    player.draw(ctx);\r\n    if(dialogs.length != 0){\r\n        dialogs[0].drawDialogText(ctx);\r\n    }\r\n    ctx.restore()\r\n}\r\n\r\nfunction clearCanvas() {\r\n    ctx.fillStyle='#000000';\r\n    ctx.fillRect(0, 0, canvas.width, canvas.height);\r\n}\r\n\r\nsetInterval(update, 1000/60);\r\n\r\n///animation test\r\n"]}